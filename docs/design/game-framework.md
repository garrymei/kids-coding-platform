🎮 游戏框架（儿童编程学习平台）
1. 核心理念

学习即游戏：通过闯关 + 养成，让孩子在玩中学。

编程主线：Python 为主，JS 可选。

成长驱动：完成任务获得 XP/徽章/金币 → 推进宠物/实验岛成长。

隐私优先：家长、教师需学生授权后才能查看数据。

2. 游戏循环（Core Loop）

接收任务/进入关卡

拖拽 Blockly 或写代码

点击运行 → 代码送入沙盒执行

判题：比对输出/事件/结构

奖励：XP/金币/徽章 → 宠物成长

解锁新关卡或作品发布

3. 世界 / 章节设计

每周 1 个世界（12 周主线）

每世界 6–8 关 → 共约 80+ 关

主题递进：顺序 → 条件 → 循环 → 函数 → 数据结构 → 综合项目

4. 关卡类型

IO 输出型：输入/输出匹配

LED 网格：点亮灯泡/图案（事件序列判题）

机器人迷宫：走迷宫到终点（事件路径判题）

像素画/绘图：生成图案（矩阵/路径比对）

音乐序列：旋律正确（音符序列匹配）

改错/填空：修复代码/补全逻辑

开放创作：作品分享，教师点评

5. 判题系统（Grader）

模式：IO、事件、结构

黑盒：只看输入→输出

白盒：收集运行事件流 → 重放比对

结构约束：必须包含循环/函数

限制：禁用危险库；限时限内存

6. 奖励与成长

XP/金币：升级与装饰

徽章：里程碑成就（如“循环达人”）

宠物/实验岛：随等级解锁外观

连续学习奖励：Streak 奖励皮肤/称号

7. 数据与指标

关卡数据：任务完成/重试次数/用时

纵向趋势：学生学习曲线

横向对比：班级对比/匿名分位

审计日志：所有访问/导出可追踪

8. 角色与关系

学生：主体，完成任务学习

家长/教师：只能查看授权后的数据

搜索/邀请码 → 申请关注 → 学生同意 → 获取数据

管理员：仅维护平台，不可直接访问学生数据

9. 技术实现分层

前端：Taro/React（学生端/家长端/教师端）

UI 包：ui-kit（统一样式）

Blockly 扩展包：自定义块

后端 API：NestJS + Postgres + Redis

执行器：代码沙盒（Python/JS）

实时服务：WebSocket，推送运行结果与通知

存储：关卡 JSON、提交记录、指标快照

10. 当前状态（待办）

 基础壳已搭建（apps/server/packages/docs）

 关卡 JSON Schema 定义

 判题模块接口（stub）

 示例关卡（前 8 个）入库

 宠物/实验岛成长逻辑

 学生授权流程

 家长/教师仪表盘

 审计日志与指标可视化
