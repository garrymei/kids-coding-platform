{
  "id": "py-music-031",
  "title": "交互式作曲",
  "lang": "python",
  "gameType": "music",
  "difficulty": 3,
  "story": "根据用户输入创作音乐。",
  "goals": ["根据输入的音阶和节拍生成旋律"],
  "starter": { "blockly": "<xml/>", "code": "scale = input()  # 如 C-D-E-F-G\nbeats = input()  # 如 1-0.5-2-1.5\n# TODO: 根据输入生成旋律" },
  "solution": "scale = input().split('-')\nbeats = input().split('-')\n\ndef create_melody(notes, durations):\n    tick = 0\n    for i in range(len(notes)):\n        note = notes[i]\n        dur = float(durations[i % len(durations)])\n        print(f'note {tick} {note} {dur}')\n        tick += dur\n\ncreate_melody(scale, beats)",
  "grader": {
    "mode": "event",
    "events": {
      "channel": "music",
      "collectFromStdout": true,
      "mapRule": "stdout line 'note t p d'"
    },
    "checks": [{ "type": "eventSeq", "expect": ["note 0 C 1.0", "note 1 D 0.5", "note 1.5 E 2.0", "note 3.5 F 1.5"] }],
    "constraints": {
      "maxTimeMs": 3000,
      "maxMemMB": 64,
      "requireStructures": ["def"]
    }
  },
  "rewards": { "xp": 50, "coins": 25, "badges": ["交互作曲家"] }
}